{% extends 'core/layout/_base.html' %}
{% load static %}

{% block title %}{% if is_update %}Update{% else %}Create{% endif %} Company{% endblock %}

{% block body %}
  {% include 'core/partials/_navbar.html' %}
  <div class="container" style="max-width: 700px; margin: 60px auto;">
    {% if messages %}
      <div style="margin-bottom: 1.5rem;">
        {% for message in messages %}
          <p style="padding: .9rem 1.2rem; border-radius: 10px; font-weight: 600; margin: .5rem 0;
                    {% if message.tags == 'error' %}background:#fee2e2; border:1px solid #fecaca; color:#991b1b;
                    {% elif message.tags == 'warning' %}background:#fef3c7; border:1px solid #fde68a; color:#92400e;
                    {% else %}background:#ecfeff; border:1px solid #a5f3fc; color:#155e75;{% endif %}">
            {{ message }}
          </p>
        {% endfor %}
      </div>
    {% endif %}
    <h2>{% if is_update %}Update{% else %}Create{% endif %} Company</h2>
    <p>Storing in RDF Triplestore (aligned to ontology)</p>

    <form method="post" style="background: var(--bg-secondary); padding: 2.5rem; border-radius: var(--radius-lg); border: 2px solid var(--border);">
      {% csrf_token %}
      {% for field in form %}
        <div style="margin-bottom: 1.5rem;">
          <label>{{ field.label }}{% if field.field.required %} *{% endif %}</label>
          {% if field.help_text %}<p style="font-size: 12px; color: var(--text-muted);">{{ field.help_text }}</p>{% endif %}
          {{ field }}
          {% if field.errors %}
            <p style="color: #ef4444; font-size: 13px;">Warning {{ field.errors|join:", " }}</p>
          {% endif %}
        </div>
      {% endfor %}

      <div style="display: flex; gap: 1rem; margin-top: 2rem;">
        <button type="submit" class="cta-btn">
          {% if is_update %}Update{% else %}Create{% endif %} Company
        </button>
        <a href="{% if is_update %}{% url 'company:detail' name %}{% else %}{% url 'company:list' %}{% endif %}" class="cta-ghost">Cancel</a>
      </div>
    </form>
  </div>
  {% include 'core/partials/_footer.html' %}
{% endblock %}

{% block styles %}
<style>
  input, select { width: 100%; padding: 0.9rem; border: 2px solid var(--border); border-radius: var(--radius); }
  input:focus, select:focus { border-color: var(--primary); }
  .form-control { width: 100%; padding: 0.9rem; border: 2px solid var(--border); border-radius: var(--radius); }
  .form-check-input { width: 1.25rem; height: 1.25rem; }
  textarea.form-control { min-height: 120px; }
  select.form-control { background: white; }
</style>
{% endblock %}

